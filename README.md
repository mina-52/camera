# 動画物体検出システム (pretest-mv.py)

## 概要

このプログラムは、指定した動画ファイルに対してYOLOv8モデルを使用したリアルタイム物体検出を実行します。四分割画面で検出結果を表示し、左上の画像は一秒ごとに自動更新され、エンターキーで一時停止/再開を制御できます。

## 機能

- **動画ファイルからの物体検出**: 指定した動画ファイルに対してYOLOv8モデルで物体検出を実行
- **四分割画面表示**: 
  - 左上: 一秒ごとに自動更新される検出物体の切り抜き画像（一時停止/再開可能）
  - 右上: リアルタイム検出結果（バウンディングボックス付き）
  - 左下: フレームごとに更新される最新の検出物体画像
  - 右下: 検出座標情報、フレームカウンター、状態表示
- **フルスクリーン表示**: 検出結果をフルスクリーンで表示
- **自動更新機能**: 左上の画像が一秒ごとに自動更新
- **一時停止/再開機能**: エンターキーで左上の更新を一時停止/再開

## 必要なファイル

- `pretest-mv.py`: メインプログラム
- `weights.pt`: 学習済みYOLOv8モデルファイル
- 動画ファイル（例: `test.mov`）

## インストール

必要なPythonパッケージをインストールしてください：

```bash
pip install opencv-python
pip install ultralytics
pip install numpy
```

## 使用方法

### 基本的な使用方法

```bash
python pretest-mv.py
```

デフォルトで`test.mov`ファイルを使用します。

### 動画ファイルを指定する場合

```bash
python pretest-mv.py --video your_video.mp4
```

### 使用例

```bash
# デフォルトのtest.movを使用
python pretest-mv.py

# 特定の動画ファイルを指定
python pretest-mv.py --video sample.mp4

# フルパスで動画ファイルを指定
python pretest-mv.py --video /path/to/your/video.mp4
```

## 操作方法

- **エンターキー**: 左上の画像更新を一時停止/再開
  - 再生中に押す: 一時停止
  - 一時停止中に押す: 現在のフレームまで飛ばして再開
- **qキー**: プログラム終了

## 画面レイアウト

```
┌─────────────────┬─────────────────┐
│                 │                 │
│   左上          │   右上          │
│ 一秒ごと        │ リアルタイム    │
│ 自動更新        │ 検出結果        │
│ (一時停止可能)   │                 │
│                 │                 │
├─────────────────┼─────────────────┤
│                 │                 │
│   左下          │   右下          │
│ フレームごと    │ 検出座標        │
│ 最新画像        │ フレーム数      │
│                 │ 状態表示        │
└─────────────────┴─────────────────┘
```

## 表示される情報

### 左上画面
- 一秒ごとに更新される検出物体の切り抜き画像
- 状態表示（"PLAYING" / "PAUSED"）
- 緑色: 再生中、赤色: 一時停止中

### 右下画面
- 検出座標情報
- フレームカウンター
- 現在の状態（再生中/一時停止）

## 対応動画形式

OpenCVがサポートする形式：
- MP4 (.mp4)
- AVI (.avi)
- MOV (.mov)
- MKV (.mkv)
- その他OpenCVがサポートする形式

## トラブルシューティング

### 動画ファイルが開けない場合
- ファイルパスが正しいか確認
- 動画ファイルが存在するか確認
- 動画ファイルが破損していないか確認

### モデルファイルが見つからない場合
- `weights.pt`ファイルが同じディレクトリにあるか確認
- モデルファイルのパスが正しいか確認

### 表示が正常でない場合
- OpenCVが正常にインストールされているか確認
- 画面解像度が適切か確認

## 技術仕様

- **Python**: 3.12.11
- **OpenCV**: 4.10.0
- **Ultralytics**: 8.3.159
- **NumPy**: 2.3.1

## ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 作者

[Your Name]

## 更新履歴

- v1.1: 一時停止/再開機能追加
  - 左上の画像を一秒ごとに自動更新
  - エンターキーで一時停止/再開機能
  - フレームカウンターと状態表示追加
- v1.0: 初期リリース
  - 動画ファイルからの物体検出機能
  - 四分割画面表示
  - エンターキーでの手動更新機能 